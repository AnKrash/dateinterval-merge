<?php

use PHPUnit\Framework\TestCase;

require "index.php";


class MergeTest extends TestCase
{
    const CASES = [
        // case 0 - intersection
        [
            // input
            [
                ['2021-03-23 12:00:00', '2021-03-23 15:00:00'],
                ['2021-03-23 10:00:00', '2021-03-23 14:00:00'],
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
            ],
            // output
            [
                ['2021-03-23 10:00:00', '2021-03-23 15:00:00'],
                ['2021-03-24 12:00:00', '2021-03-23 15:00:00'],
            ],
        ],
        // case 1 - inclusion
        [
            // input
            [
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-23 12:00:00', '2021-03-23 15:00:00'],
                ['2021-03-23 13:00:00', '2021-03-23 14:00:00'],
                ['2021-03-23 13:00:00', '2021-03-23 15:00:00'],
            ],
            // output
            [
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-23 10:00:00', '2021-03-23 15:00:00'],
            ]
        ],
        // case 2 - no intersections
        [
            // input
            [
                ['2021-03-23 12:00:00', '2021-03-23 15:00:00'],
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-25 12:00:00', '2021-03-25 15:00:00'],
                ['2021-03-26 12:00:00', '2021-03-26 15:00:00'],
            ],
            // output
            [
                ['2021-03-23 12:00:00', '2021-03-23 15:00:00'],
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-25 12:00:00', '2021-03-25 15:00:00'],
                ['2021-03-26 12:00:00', '2021-03-26 15:00:00'],
            ]
        ],
        // case 3 - combined
        [
            // input
            [
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-23 12:00:00', '2021-03-23 15:00:00'],
                ['2021-03-23 13:00:00', '2021-03-23 14:00:00'],
                ['2021-03-23 14:00:00', '2021-03-23 16:00:00'],
            ],
            // output
            [
                ['2021-03-24 12:00:00', '2021-03-24 15:00:00'],
                ['2021-03-23 12:00:00', '2021-03-23 16:00:00'],
            ]
        ],
        // case 4 - empty input
        [
            // input
            [
            ],
            // output
            [
            ]
        ],
    ];

    /** @dataProvider dataProvider */
    public function testMerge($input, $output)
    {
        $actualOutput = merge($input);
        $this->assertSame($actualOutput, $output);
    }

    public function dataProvider()
    {
        return static::CASES;
    }
}